---
import { type CollectionEntry, getCollection, getEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Hero from "../../components/Hero.astro";
import Higlights from "../../components/Highlights.astro";

const {
  data: { title, description },
} = await getEntry("pagemetas", "projects");

const projects: CollectionEntry<"projects">[] = (
  await getCollection("projects", project => !project.data.isDraft)
).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout>
  <Hero {title} {description} />
  <Higlights {projects} />
</Layout>
