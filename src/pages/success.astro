---
import Layout from "../layouts/Layout.astro";

if (Astro.request.method === "POST") {
  try {
    const formData = await Astro.request.formData();
    await fetch(`${Astro.url.origin}/api/inquiry`, {
      method: "POST",
      body: formData,
    });
  } catch (error) {
    if (error instanceof Error) {
      console.warn(error.message);
    }
  }
}
---

<Layout>
  <div
    class="container grid place-self-center place-items-center h-full animate-ping-reverse"
  >
    <article class="p-4 rounded-lg bg-slate-800 bg-blend-overlay">
      <h1>Submission Received! üëçüèΩ</h1>
      <p>
        Thank you for your feedback!<br />Head back to the <a
          href="/"
          class="decoration-green-600 underline underline-offset-2">home page</a
        >
      </p>
    </article>
  </div>
</Layout>

<div class="hidden">
  <form
    name="contact v1"
    method="POST"
    data-netlify
    data-netlify-honeypot="bot-field"
  >
    <input type="hidden" name="form-name" value="contact v1" />
    <p class="hidden">
      <label for="bot-field">Don't type here if you're human.</label>
      <input id="bot-field" name="bot-field" />
    </p>
    <input type="email" name="email" required />
    <input type="text" name="name" required />
    <textarea name="message" required></textarea>
  </form>
</div>
